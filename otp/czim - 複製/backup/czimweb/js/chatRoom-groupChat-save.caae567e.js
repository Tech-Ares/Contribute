(window.webpackJsonp=window.webpackJsonp||[]).push([["chatRoom-groupChat-save"],{"9e62":function(e,t,r){},a89d:function(e,t,r){"use strict";r("9e62")},ef69:function(e,t,r){"use strict";r.r(t);r("a4d3"),r("e01a");var o=r("7a23"),n=Object(o.createTextVNode)("公开群"),a=Object(o.createTextVNode)("私有群"),c=Object(o.createTextVNode)("是"),l=Object(o.createTextVNode)("否"),u=Object(o.createTextVNode)("是"),i=Object(o.createTextVNode)("否"),d=["src"],s=Object(o.createTextVNode)("取 消"),m=Object(o.createTextVNode)("保 存");var b=r("1da1"),f=(r("d81d"),r("96cf"),{emits:["success","closed"],data:function(){return{mode:"add",titleMap:{edit:"编辑",add:"新增"},visible:!1,isSaveing:!1,loading:!1,form:{groupName:"",groupImg:"",announcement:"",description:"",memberSonly:"",allowInvites:"",maxusers:0,ownId:"",isPublic:""},managerOptions:[],file:{},rules:{ownId:[{required:!0,message:"请选择群主",trigger:"change"}],isPublic:[{required:!0,message:"请选择群组类型"}],memberSonly:[{required:!0,message:"请选择是否需要审批才可加入"}],allowInvites:[{required:!0,message:"请选择是否允许邀请"}],maxusers:[{required:!0,message:"请输入成员上限"}],groupName:[{required:!0,message:"请输入群名称"}],description:[{required:!0,message:"请输入群描述"}],groupImg:[{required:!0,message:"请上传群封面"}]}}},mounted:function(){},methods:{findForm:function(e){var t=this;return Object(b.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,t.$API.groupChat.findForm.post(e);case 3:if(o=r.sent,console.log(o,"获取当前数据"),t.loading=!1,0===o.code){r.next=8;break}return r.abrupt("return",t.$message.warning("获取数据失败"));case 8:t.form=o.data;case 9:case"end":return r.stop()}}),r)})))()},getmanager:function(){var e=this;return Object(b.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$API.chatRoom.getManager.get();case 2:if(r=t.sent,console.log(r,"getmanager"),e.loading=!1,0===r.code){t.next=7;break}return t.abrupt("return",e.$message.warning("获取数据失败"));case 7:o=r.data.map((function(e){return{value:e.managerName,label:e.managerId}})),console.log(o,"opts"),e.managerOptions=o,console.log(e.managerOptions);case 11:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;this.$refs.dialogForm.validate(function(){var t=Object(b.a)(regeneratorRuntime.mark((function t(r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return e.isSaveing=!0,t.next=4,e.$API.groupChat.createChat.post(e.form);case 4:o=t.sent,e.isSaveing=!1,0==o.code?(e.$emit("success",e.form,e.mode),e.visible=!1,e.$message.success("操作成功")):e.$alert(o.message,"提示",{type:"error"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},beforeAvatarUpload:function(e){this.file=e,console.log(e);var t=e.size/1024/1024<2;return t||this.$message.error("Avatar picture size can not exceed 2MB!"),t},handleUpload:function(){var e=this;return Object(b.a)(regeneratorRuntime.mark((function t(){var r,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{"Content-Type":"multipart/form-data"}},(o=new FormData).append("file",e.file),t.next=5,e.$API.fileUpload.upload.post("",o,r);case 5:n=t.sent,e.form.groupImg=n.data[0].imageUrl,console.log(n);case 8:case"end":return t.stop()}}),t)})))()},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";return this.mode=e,this.visible=!0,this.getmanager(),this},setData:function(e){this.findForm(e),console.log(e,"id")}}}),p=(r("a89d"),r("6b0d"));const O=r.n(p)()(f,[["render",function(e,t,r,b,f,p){var O=Object(o.resolveComponent)("el-option"),j=Object(o.resolveComponent)("el-select"),g=Object(o.resolveComponent)("el-form-item"),h=Object(o.resolveComponent)("el-radio"),v=Object(o.resolveComponent)("el-radio-group"),V=Object(o.resolveComponent)("el-input-number"),w=Object(o.resolveComponent)("el-input"),x=Object(o.resolveComponent)("el-icon-plus"),C=Object(o.resolveComponent)("el-icon"),N=Object(o.resolveComponent)("el-upload"),k=Object(o.resolveComponent)("el-form"),_=Object(o.resolveComponent)("el-button"),I=Object(o.resolveComponent)("el-dialog"),y=Object(o.resolveDirective)("loading");return Object(o.openBlock)(),Object(o.createBlock)(I,{title:f.titleMap[f.mode],modelValue:f.visible,"onUpdate:modelValue":t[10]||(t[10]=function(e){return f.visible=e}),width:500,"destroy-on-close":"",onClosed:t[11]||(t[11]=function(t){return e.$emit("closed")})},{footer:Object(o.withCtx)((function(){return[Object(o.createVNode)(_,{onClick:t[8]||(t[8]=function(e){return f.visible=!1})},{default:Object(o.withCtx)((function(){return[s]})),_:1}),"show"!=f.mode?(Object(o.openBlock)(),Object(o.createBlock)(_,{key:0,type:"primary",loading:f.isSaveing,onClick:t[9]||(t[9]=function(e){return p.submit()})},{default:Object(o.withCtx)((function(){return[m]})),_:1},8,["loading"])):Object(o.createCommentVNode)("",!0)]})),default:Object(o.withCtx)((function(){return[Object(o.withDirectives)(Object(o.createVNode)(k,{model:f.form,ref:"dialogForm",rules:f.rules,"label-width":"100px","label-position":"left"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(g,{label:"管理员",prop:"ownId"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(j,{modelValue:f.form.ownId,"onUpdate:modelValue":t[0]||(t[0]=function(e){return f.form.ownId=e}),placeholder:"选择管理员"},{default:Object(o.withCtx)((function(){return[(Object(o.openBlock)(!0),Object(o.createElementBlock)(o.Fragment,null,Object(o.renderList)(f.managerOptions,(function(e){return Object(o.openBlock)(),Object(o.createBlock)(O,{key:e.value,value:e.label,label:e.value},{default:Object(o.withCtx)((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.value),1)]})),_:2},1032,["value","label"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(o.createVNode)(g,{label:"群组类型",prop:"isPublic"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(v,{modelValue:f.form.isPublic,"onUpdate:modelValue":t[1]||(t[1]=function(e){return f.form.isPublic=e})},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(h,{label:!0},{default:Object(o.withCtx)((function(){return[n]})),_:1}),Object(o.createVNode)(h,{label:!1},{default:Object(o.withCtx)((function(){return[a]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(o.createVNode)(g,{label:"需要审批",prop:"memberSonly"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(v,{modelValue:f.form.memberSonly,"onUpdate:modelValue":t[2]||(t[2]=function(e){return f.form.memberSonly=e})},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(h,{label:!0},{default:Object(o.withCtx)((function(){return[c]})),_:1}),Object(o.createVNode)(h,{label:!1},{default:Object(o.withCtx)((function(){return[l]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(o.createVNode)(g,{label:"允许邀请",prop:"allowInvites"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(v,{modelValue:f.form.allowInvites,"onUpdate:modelValue":t[3]||(t[3]=function(e){return f.form.allowInvites=e})},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(h,{label:!0},{default:Object(o.withCtx)((function(){return[u]})),_:1}),Object(o.createVNode)(h,{label:!1},{default:Object(o.withCtx)((function(){return[i]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(o.createVNode)(g,{label:"成员上限",prop:"maxusers"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(V,{modelValue:f.form.maxusers,"onUpdate:modelValue":t[4]||(t[4]=function(e){return f.form.maxusers=e}),min:0},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(g,{label:"群名称",prop:"groupName"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(w,{modelValue:f.form.groupName,"onUpdate:modelValue":t[5]||(t[5]=function(e){return f.form.groupName=e}),placeholder:"群名称",clearable:""},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(g,{label:"群描述",prop:"description"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(w,{modelValue:f.form.description,"onUpdate:modelValue":t[6]||(t[6]=function(e){return f.form.description=e}),placeholder:"群描述",clearable:""},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(g,{label:"群公告",prop:"announcement"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(w,{modelValue:f.form.announcement,"onUpdate:modelValue":t[7]||(t[7]=function(e){return f.form.announcement=e}),type:"textarea",placeholder:"群公告",clearable:""},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(g,{label:"群封面",prop:"groupImg"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(N,{action:"#",class:"avatar-uploader","show-file-list":!1,"http-request":p.handleUpload,"before-upload":p.beforeAvatarUpload},{default:Object(o.withCtx)((function(){return[f.form.groupImg?(Object(o.openBlock)(),Object(o.createElementBlock)("img",{key:0,class:"avatar",src:f.form.groupImg},null,8,d)):(Object(o.openBlock)(),Object(o.createBlock)(C,{key:1,class:"avatar-uploader-icon"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(x)]})),_:1}))]})),_:1},8,["http-request","before-upload"])]})),_:1})]})),_:1},8,["model","rules"]),[[y,f.loading]])]})),_:1},8,["title","modelValue"])}]]);t.default=O}}]);