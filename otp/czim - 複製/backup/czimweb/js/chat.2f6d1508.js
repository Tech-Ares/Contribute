(window.webpackJsonp=window.webpackJsonp||[]).push([["chat","chat-components-burnDialog","chat-components-indexDialog"],{"4bb3":function(e,t,n){"use strict";n("80d7")},"4d72":function(e,t,n){"use strict";n.r(t);var r=n("1da1"),c=(n("99af"),n("96cf"),n("7a23")),o=n("3ef4"),a=n("5502"),l=function(e){return Object(c.pushScopeId)("data-v-003b0cc0"),e=e(),Object(c.popScopeId)(),e}((function(){return Object(c.createElementVNode)("strong",null,"提示: 操作禁言后，该用户在一段时间内将无法在该群聊(聊天室)发言。禁言天数填0点击执行，将为用户解除禁言。",-1)})),i=Object(c.createTextVNode)("已禁言"),s=Object(c.createTextVNode)("正常"),u=Object(c.createTextVNode)("此用户已被移出群聊(聊天室)"),b=Object(c.createTextVNode)("当前"),d=Object(c.createTextVNode)("全局"),f=Object(c.createTextVNode)("当前"),m=Object(c.createTextVNode)("全局"),p={class:"dialog-footer"},O=Object(c.createTextVNode)("取消"),j=Object(c.createTextVNode)("执行"),g=Object(c.createTextVNode)("执行"),h={setup:function(e,t){var n=t.expose,h=Object(c.getCurrentInstance)().appContext,v=Object(a.c)(),C=Object(c.reactive)({day:[{required:!0,message:"请输入禁言时长",trigger:"blur"},{pattern:/(^0$)|(^[1-9]+[0-9]*$)/,message:"请输入大于0的整数",trigger:"blur"}],range:[{required:!0,message:"请选择",trigger:"blur"}]}),x=Object(c.ref)(!1),k=Object(c.ref)(""),y=Object(c.reactive)({loading:!1,handle:!1}),w=Object(c.ref)(),N=Object(c.reactive)({chatRoomId:Object(c.computed)((function(){return v.state.user.currentChat.chatRoomId||""})),memberId:"",day:0,range:"current"}),V=Object(c.reactive)({groupId:Object(c.computed)((function(){return v.state.user.currentChat.chatRoomId||v.state.user.currentChat.chatgroupId})),memberId:"",day:0,range:"current"}),B=Object(c.reactive)({info:{},nickName:""}),T=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.loading=!0,e.next=3,h.config.globalProperties.$API.imApi.getForbidState.post({chatRoomId:N.chatRoomId,memberId:N.memberId});case 3:if(t=e.sent,y.loading=!1,0===t.code){e.next=7;break}return e.abrupt("return",o.a.error("获取用户状态失败"));case 7:console.log(t),B.info=t.data;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.handle=!0,"current"!==V.range){e.next=21;break}return e.prev=2,e.next=5,w.value.validate();case 5:return e.next=7,h.config.globalProperties.$API.imApi.memberForbidden.post(N);case 7:t=e.sent,console.log(t),0==N.day?o.a.success("已为 用户：".concat(B.nickName," 解除禁言")):N.day>0&&o.a.success("禁言 用户：".concat(B.nickName," ").concat(N.day,"天")),E(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:return e.prev=16,y.handle=!1,e.finish(16);case 19:e.next=22;break;case 21:S();case 22:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.loading=!0,e.next=3,h.config.globalProperties.$API.imApi.getForbidStateGroup.post({chatGroupId:V.groupId,memberId:V.memberId});case 3:if(t=e.sent,y.loading=!1,0===t.code){e.next=7;break}return e.abrupt("return",o.a.error("获取群聊用户状态失败"));case 7:console.log(t),B.info=t.data;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.handle=!0,"current"!==V.range){e.next=21;break}return e.prev=2,e.next=5,w.value.validate();case 5:return e.next=7,h.config.globalProperties.$API.imApi.memberForbiddenGroup.post(V);case 7:t=e.sent,console.log(t),0==V.day?o.a.success("已为 用户：".concat(B.nickName," 解除禁言")):V.day>0&&o.a.success("禁言 用户：".concat(B.nickName," ").concat(V.day,"天")),E(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:return e.prev=16,y.handle=!1,e.finish(16);case 19:e.next=22;break;case 21:S();case 22:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("banGroup"!==k.value){e.next=20;break}return e.prev=1,e.next=4,w.value.validate();case 4:return e.next=6,h.config.globalProperties.$API.imApi.globalProhibit.post({memberId:V.memberId,day:V.day});case 6:t=e.sent,console.log(t),0==V.day?o.a.success("已为 用户：".concat(B.nickName," 解除全局禁言")):V.day>0&&o.a.success("全局禁言 用户：".concat(B.nickName," ").concat(V.day,"天")),E(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:return e.prev=15,y.handle=!1,e.finish(15);case 18:e.next=37;break;case 20:return e.prev=20,e.next=23,w.value.validate();case 23:return e.next=25,h.config.globalProperties.$API.imApi.globalProhibit.post({memberId:N.memberId,day:N.day});case 25:n=e.sent,console.log(n),0==N.day?o.a.success("已为 用户：".concat(B.nickName," 解除全局禁言")):N.day>0&&o.a.success("全局禁言 用户：".concat(B.nickName," ").concat(N.day,"天")),E(),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(20),console.log(e.t1);case 34:return e.prev=34,y.handle=!1,e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[1,12,15,18],[20,31,34,37]])})));return function(){return e.apply(this,arguments)}}(),E=function(){N.day=0,N.range="current",V.day=0,V.range="current",x.value=!1};return n({open:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"banRoom";k.value=t,B.nickName=e.ext.nickName,"banRoom"==t?N.memberId=e.from:V.memberId=e.from,x.value=!0},getUserStatus:T,getGroupUserStatus:$}),function(e,t){var n=Object(c.resolveComponent)("el-descriptions-item"),r=Object(c.resolveComponent)("el-tag"),o=Object(c.resolveComponent)("el-descriptions"),a=Object(c.resolveComponent)("el-radio-button"),h=Object(c.resolveComponent)("el-radio-group"),v=Object(c.resolveComponent)("el-form-item"),T=Object(c.resolveComponent)("el-input-number"),$=Object(c.resolveComponent)("el-form"),S=Object(c.resolveComponent)("el-button"),D=Object(c.resolveComponent)("el-dialog"),R=Object(c.resolveDirective)("loading");return Object(c.openBlock)(),Object(c.createBlock)(D,{modelValue:x.value,"onUpdate:modelValue":t[4]||(t[4]=function(e){return x.value=e}),title:"禁言用户",width:"35%","destroy-on-close":"",onClose:E},{footer:Object(c.withCtx)((function(){return[Object(c.createElementVNode)("span",p,[Object(c.createVNode)(S,{onClick:E},{default:Object(c.withCtx)((function(){return[O]})),_:1}),"banRoom"==k.value&&2!==Object(c.unref)(B).info.result?(Object(c.openBlock)(),Object(c.createBlock)(S,{key:0,type:"primary",onClick:I,loading:Object(c.unref)(y).handle},{default:Object(c.withCtx)((function(){return[j]})),_:1},8,["loading"])):Object(c.createCommentVNode)("",!0),"banGroup"==k.value&&2!==Object(c.unref)(B).info.result?(Object(c.openBlock)(),Object(c.createBlock)(S,{key:1,type:"primary",onClick:_},{default:Object(c.withCtx)((function(){return[g]})),_:1})):Object(c.createCommentVNode)("",!0)])]})),default:Object(c.withCtx)((function(){return[l,Object(c.withDirectives)(Object(c.createVNode)(o,null,{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(n,{label:"昵称:"},{default:Object(c.withCtx)((function(){return[Object(c.createTextVNode)(Object(c.toDisplayString)(Object(c.unref)(B).nickName),1)]})),_:1}),Object(c.createVNode)(n,{label:"状态:"},{default:Object(c.withCtx)((function(){return[1===Object(c.unref)(B).info.result?(Object(c.openBlock)(),Object(c.createBlock)(r,{key:0,type:"danger"},{default:Object(c.withCtx)((function(){return[i]})),_:1})):0===Object(c.unref)(B).info.result?(Object(c.openBlock)(),Object(c.createBlock)(r,{key:1,type:"success"},{default:Object(c.withCtx)((function(){return[s]})),_:1})):(Object(c.openBlock)(),Object(c.createBlock)(r,{key:2,type:"danger"},{default:Object(c.withCtx)((function(){return[u]})),_:1}))]})),_:1}),1===Object(c.unref)(B).info.result?(Object(c.openBlock)(),Object(c.createBlock)(n,{key:0,label:"剩余时间:"},{default:Object(c.withCtx)((function(){return[Object(c.createTextVNode)(Object(c.toDisplayString)(Object(c.unref)(B).info.time),1)]})),_:1})):Object(c.createCommentVNode)("",!0)]})),_:1},512),[[R,Object(c.unref)(y).loading]]),"banGroup"==k.value?(Object(c.openBlock)(),Object(c.createBlock)($,{key:0,ref:function(e,t){t.forbidForm=e,w.value=e},model:Object(c.unref)(V),"label-position":"left",rules:Object(c.unref)(C)},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(v,{label:"禁言范围：",prop:"range"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(h,{modelValue:Object(c.unref)(V).range,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Object(c.unref)(V).range=e})},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(a,{label:"current"},{default:Object(c.withCtx)((function(){return[b]})),_:1}),Object(c.createVNode)(a,{label:"global"},{default:Object(c.withCtx)((function(){return[d]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(c.createVNode)(v,{label:"禁言天数：",prop:"day"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(T,{modelValue:Object(c.unref)(V).day,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(c.unref)(V).day=e}),step:1,min:0},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])):Object(c.createCommentVNode)("",!0),"banRoom"==k.value?(Object(c.openBlock)(),Object(c.createBlock)($,{key:1,ref:function(e,t){t.forbidForm=e,w.value=e},model:Object(c.unref)(N),"label-position":"left",rules:Object(c.unref)(C)},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(v,{label:"禁言范围：",prop:"range"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(h,{modelValue:Object(c.unref)(N).range,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(c.unref)(N).range=e})},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(a,{label:"current"},{default:Object(c.withCtx)((function(){return[f]})),_:1}),Object(c.createVNode)(a,{label:"global"},{default:Object(c.withCtx)((function(){return[m]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(c.createVNode)(v,{label:"禁言天数：",prop:"day"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(T,{modelValue:Object(c.unref)(N).day,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(c.unref)(N).day=e}),step:1,min:0},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])):Object(c.createCommentVNode)("",!0)]})),_:1},8,["modelValue"])}}},v=(n("801e"),n("6b0d"));const C=n.n(v)()(h,[["__scopeId","data-v-003b0cc0"]]);t.default=C},"6f29":function(e,t,n){"use strict";n.r(t);n("b64b");var r=n("7a23"),c={ref:"voiceMsg"},o={class:"current-chat"},a={class:"name"},l={key:0},i=["textContent"],s={class:"msg-main"},u={class:"ava"},b=function(e){return Object(r.pushScopeId)("data-v-edaee1fe"),e=e(),Object(r.popScopeId)(),e}((function(){return Object(r.createElementVNode)("div",{class:"image-slot"},[Object(r.createTextVNode)(" Loading "),Object(r.createElementVNode)("span",{class:"dot"},"...")],-1)})),d={key:1,class:"text"},f=Object(r.createTextVNode)("点击查看阅后即焚消息"),m=["onClick"],p=Object(r.createTextVNode)("语音消息 "),O=["textContent"],j=["textContent"],g={key:0,class:"status"},h=Object(r.createTextVNode)("已发送"),v=Object(r.createTextVNode)("已读"),C={class:"more"},x={class:"el-dropdown-link"},k=Object(r.createTextVNode)("撤回消息"),y=Object(r.createTextVNode)("禁言用户"),w=Object(r.createTextVNode)("加为好友"),N=["textContent"],V={key:1,class:"recall"};var B=n("1da1"),T=n("5530"),I=(n("96cf"),n("ac1f"),n("466d"),n("dcb7")),$=n("11c8"),_=n("79bf"),S=n("4d72"),E=n("fb44"),D=n("5502"),R=n("23f9"),A={name:"chat",data:function(){return{onlineNum:0,srcList:[],voiceSrc:"",scrollPosition:0,timer:null}},computed:Object(T.a)(Object(T.a)({},Object(D.b)(["fetchCurrentMsg"])),{},{currentChat:function(){return this.$store.state.user.currentChat}}),watch:{fetchCurrentMsg:function(){var e=this;this.$nextTick((function(){return e.scrollBottom()}))},scrollPosition:{handler:function(e){if(e&&e>800){if(this.$refs.sendBox.showToBottom)return;this.$refs.sendBox.backToBottom(!0)}else{if(!this.$refs.sendBox.showToBottom)return;this.$refs.sendBox.backToBottom(!1)}}}},created:function(){this.watchPaste()},mounted:function(){this.loadCurrentList()},methods:{loadCurrentList:function(){var e=this.$TOOL.data.get("ACTIVE_TAB")||"recent";this.$refs.sideList.switchTab(e)},loadCurrentMsg:function(e,t){if(console.log(e,t),this.currentChat)if(e&&0===t)console.log(0),this.$store.dispatch("fetchHistoryMsg",{id:e,type:"contact"});else if(e&&1===t)console.log(1),this.$store.dispatch("fetchHistoryMsg",{id:e,type:"groupchat"}),this.getGroupInfo();else{if(!e||2!==t)return this.$message.warning("参数错误，获取聊天记录失败");console.log(2),this.$store.dispatch("fetchHistoryMsg",{id:e,type:"chatroom"})}},scrollBottom:function(){this.$refs.scrollbar.scrollTop=this.$refs.scrollbar.scrollHeight},scrollBottomSmooth:function(){this.$refs.scrollbar.scrollTo({top:this.$refs.scrollbar.scrollHeight,behavior:"smooth"})},scrolling:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.watchScroll()}),300)},watchScroll:function(){if(this.$refs.scrollbar){var e=this.$refs.scrollbar.scrollHeight,t=this.$refs.scrollbar.scrollTop;this.scrollPosition=e-t}},openDrawer:function(){if(!Object.keys(this.currentChat).length)return this.$message.warning("请选择聊天目标后重试");if(2===this.currentChat.czType)this.$refs.drawer.open("chatroom");else if(0===this.currentChat.czType)this.$refs.drawer.open();else{if(1!==this.currentChat.czType)return this.$message.error("参数错误，访问被拒绝");this.$refs.drawer.open("groupchat")}},recall:function(e){var t=this;return Object(B.a)(regeneratorRuntime.mark((function n(){var r,c,o,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!=t.currentChat.czType&&2!=t.currentChat.czType){n.next=22;break}if(!e.bySelf){n.next=12;break}return console.log("撤回自己消息"),n.next=5,t.$API.imApi.recallMsg.post({chatType:0,receiveId:e.chatId,messageType:1,messageContent:e.mid});case 5:if(r=n.sent,console.log(r),0===r.code){n.next=9;break}return n.abrupt("return",t.$message.warning("消息撤回失败"));case 9:t.$store.commit("onRecall",{bySelf:e.bySelf,to:e.chatId,mid:e.mid}),n.next=20;break;case 12:return console.log("撤回他人消息"),n.next=15,t.$API.imApi.recallMsg.post({chatType:0,receiveId:e.chatId,messageType:1,messageContent:e.mid});case 15:if(c=n.sent,console.log(c),0===c.code){n.next=19;break}return n.abrupt("return",t.$message.warning("消息撤回失败"));case 19:t.$store.commit("onRecall",{bySelf:e.bySelf,to:e.chatId,mid:e.mid});case 20:n.next=46;break;case 22:if(0!=t.currentChat.czType){n.next=46;break}if(!e.bySelf){n.next=38;break}if(console.log("单聊撤回自己消息"),e.ext.fireTime){n.next=35;break}return n.next=28,t.$API.imApi.recallOne.post({chatType:0,receiveId:e.chatId,messageType:1,messageContent:e.mid});case 28:if(o=n.sent,console.log(o),0===o.code){n.next=32;break}return n.abrupt("return",t.$message.warning("消息撤回失败"));case 32:t.$store.commit("onRecall",{bySelf:e.bySelf,to:e.chatId,mid:e.mid}),n.next=36;break;case 35:e.ext.fireTime&&e.ext.fireTime>0&&t.$store.commit("onRecall",{bySelf:e.bySelf,to:e.chatId,mid:e.mid});case 36:n.next=46;break;case 38:return console.log("单聊撤回他人消息"),n.next=41,t.$API.imApi.recallOne.post({chatType:0,receiveId:e.chatId,messageType:1,messageContent:e.mid});case 41:if(a=n.sent,console.log(a),0===a.code){n.next=45;break}return n.abrupt("return",t.$message.warning("消息撤回失败"));case 45:t.$store.commit("onRecall",{bySelf:e.bySelf,to:e.chatId,mid:e.mid});case 46:case"end":return n.stop()}}),n)})))()},readBurnMsg:function(e){console.log(e),this.$refs.burn.open(e),this.$refs.burn.countDown()},handleBurn:function(e){console.log(e),this.recall(e)},ban:function(e){if(e.bySelf)return this.$message.warning("不可以禁言自己");console.log(e),1==this.currentChat.czType?(this.$refs.forbid.open(e,"banGroup"),this.$refs.forbid.getGroupUserStatus()):2==this.currentChat.czType&&(this.$refs.forbid.open(e,"banRoom"),this.$refs.forbid.getUserStatus())},addFriend:function(e){var t=this;return Object(B.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.from,n.next=3,t.$API.imApi.addFriendById.post({targetId:r});case 3:if(0===n.sent.code){n.next=6;break}return n.abrupt("return",t.$message.warning("服务器异常，建立好友关系失败"));case 6:t.$message.success("建立好友关系成功");case 7:case"end":return n.stop()}}),n)})))()},playAudio:function(e){this.$refs.voiceMsg.src=e,this.$refs.voiceMsg.play()},watchPaste:function(){var e=this;document.addEventListener("paste",(function(t){if(t.clipboardData||t.originalEvent){var n=t.clipboardData||t.originalEvent.clipboardData;if(console.log(n),n.items){var r=n.items;console.log(r,"it");for(var c=null,o=0;o<r.length;o++)if(r[o].type.match("^image/")&&"file"===r[o].kind){c=r[o].getAsFile();break}if(!c)return;console.log(c),e.$refs.sendBox.setPasteFile(c)}}}))},preview:function(e){this.srcList[0]=e},getGroupInfo:function(){var e=this;return Object(B.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={groupId:e.currentChat.targetId},t.next=4,R.a.conn.getGroupInfo(n);case 4:r=t.sent,e.onlineNum=r.data[0].affiliations_count,console.log(r),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}},components:{sideList:I.default,sendBox:_.default,sideDrawer:$.default,indexDialog:S.default,burnDialog:E.default}},P=(n("4bb3"),n("6b0d"));const M=n.n(P)()(A,[["render",function(e,t,n,B,T,I){var $=Object(r.resolveComponent)("side-list"),_=Object(r.resolveComponent)("el-aside"),S=Object(r.resolveComponent)("el-alert"),E=Object(r.resolveComponent)("el-icon-setting"),D=Object(r.resolveComponent)("el-icon"),R=Object(r.resolveComponent)("el-header"),A=Object(r.resolveComponent)("el-avatar"),P=Object(r.resolveComponent)("el-image"),M=Object(r.resolveComponent)("el-button"),z=Object(r.resolveComponent)("el-icon-video-play"),F=Object(r.resolveComponent)("el-tag"),G=Object(r.resolveComponent)("el-icon-operation"),L=Object(r.resolveComponent)("el-dropdown-item"),U=Object(r.resolveComponent)("el-dropdown-menu"),H=Object(r.resolveComponent)("el-dropdown"),q=Object(r.resolveComponent)("el-empty"),J=Object(r.resolveComponent)("send-box"),K=Object(r.resolveComponent)("el-footer"),Q=Object(r.resolveComponent)("el-main"),W=Object(r.resolveComponent)("el-container"),X=Object(r.resolveComponent)("side-drawer"),Y=Object(r.resolveComponent)("index-dialog"),Z=Object(r.resolveComponent)("burn-dialog"),ee=Object(r.resolveDirective)("copy");return Object(r.openBlock)(),Object(r.createElementBlock)(r.Fragment,null,[Object(r.createElementVNode)("audio",c,null,512),Object(r.createVNode)(W,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(_,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)($,{ref:"sideList",onGetCurrentMsg:I.loadCurrentMsg},null,8,["onGetCurrentMsg"])]})),_:1}),Object(r.createVNode)(Q,{class:"nopadding"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(R,null,{default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("div",o,[Object(r.createElementVNode)("span",a,[Object(r.createTextVNode)(Object(r.toDisplayString)(I.currentChat.nickName||I.currentChat.chatRoomName||I.currentChat.groupName)+" ",1),Object.keys(I.currentChat).length>0&&0!==I.currentChat.czType?(Object(r.openBlock)(),Object(r.createElementBlock)("i",l,"("+Object(r.toDisplayString)(T.onlineNum)+"/"+Object(r.toDisplayString)(I.currentChat.maxusers)+")",1)):Object(r.createCommentVNode)("",!0)]),Object(r.createVNode)(r.Transition,{name:"el-zoom-in-center"},{default:Object(r.withCtx)((function(){return[Object(r.withDirectives)(Object(r.createElementVNode)("span",null,"对方正在输入...",512),[[r.vShow,0==I.currentChat.czType&&I.currentChat.typing]])]})),_:1}),Object(r.createVNode)(r.Transition,{name:"el-zoom-in-center"},{default:Object(r.withCtx)((function(){return[0!==I.currentChat.czType&&I.currentChat.isProhibit?(Object(r.openBlock)(),Object(r.createBlock)(S,{key:0,title:"管理员已开启全员禁言",type:"warning",effect:"dark","show-icon":""})):Object(r.createCommentVNode)("",!0)]})),_:1})]),Object(r.createVNode)(D,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(E,{onClick:I.openDrawer},null,8,["onClick"])]})),_:1})]})),_:1}),Object(r.createElementVNode)("div",{class:"message-box",ref:"scrollbar",id:"scrollbar",onScroll:t[0]||(t[0]=function(){return I.scrolling&&I.scrolling.apply(I,arguments)})},[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.fetchCurrentMsg,(function(e,t){return Object(r.openBlock)(),Object(r.createElementBlock)(r.Fragment,{key:e.mid},["recall"!==e.status?(Object(r.openBlock)(),Object(r.createElementBlock)("div",{key:0,class:Object(r.normalizeClass)(["msg",{byself:e.bySelf}])},[Object(r.createElementVNode)("p",{class:"nickname",textContent:Object(r.toDisplayString)(e.ext.nickName||"")},null,8,i),Object(r.createElementVNode)("div",s,[Object(r.createElementVNode)("div",u,[Object(r.createVNode)(A,{shape:"circle",size:30,src:e.ext.avatar||"//cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png",fit:"fill"},null,8,["src"])]),Object(r.createElementVNode)("div",{class:"msg-content",style:Object(r.normalizeStyle)({background:"text"==e.type&&e.bySelf?"#9eea6a":"#f8f8f8"})},["image"==e.type?(Object(r.openBlock)(),Object(r.createBlock)(P,{key:0,src:e.msg,"preview-src-list":T.srcList,onClick:function(t){return I.preview(e.msg)}},{placeholder:Object(r.withCtx)((function(){return[b]})),_:2},1032,["src","preview-src-list","onClick"])):e.ext.fireTime&&"null"!==e.ext.fireTime?(Object(r.openBlock)(),Object(r.createElementBlock)("div",d,[Object(r.createVNode)(M,{type:"danger",onClick:function(t){return I.readBurnMsg(e)}},{default:Object(r.withCtx)((function(){return[f]})),_:2},1032,["onClick"])])):"voice"==e.type?(Object(r.openBlock)(),Object(r.createElementBlock)("div",{key:2,class:"audio",onClick:function(t){return I.playAudio(e.msg)}},[Object(r.createVNode)(D,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(z)]})),_:1}),p],8,m)):"text"==e.type?Object(r.withDirectives)((Object(r.openBlock)(),Object(r.createElementBlock)("p",{key:3,class:"text",textContent:Object(r.toDisplayString)(e.msg)},null,8,O)),[[ee]]):"shake"==e.type?(Object(r.openBlock)(),Object(r.createElementBlock)("p",{key:4,class:"text",textContent:Object(r.toDisplayString)(e.msg)},null,8,j)):Object(r.createCommentVNode)("",!0)],4),0===I.currentChat.czType?(Object(r.openBlock)(),Object(r.createElementBlock)("div",g,[Object(r.withDirectives)(Object(r.createVNode)(F,null,{default:Object(r.withCtx)((function(){return[h]})),_:2},1536),[[r.vShow,"sending"==e.status]]),Object(r.withDirectives)(Object(r.createVNode)(F,{type:"success"},{default:Object(r.withCtx)((function(){return[v]})),_:2},1536),[[r.vShow,"read"==e.status]])])):Object(r.createCommentVNode)("",!0),Object(r.createElementVNode)("div",C,[Object(r.createVNode)(H,{trigger:"click"},{dropdown:Object(r.withCtx)((function(){return[Object(r.createVNode)(U,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(L,{onClick:function(t){return I.recall(e)}},{default:Object(r.withCtx)((function(){return[k]})),_:2},1032,["onClick"]),0!==I.currentChat.czType?(Object(r.openBlock)(),Object(r.createBlock)(L,{key:0,disabled:e.bySelf,onClick:function(t){return I.ban(e)}},{default:Object(r.withCtx)((function(){return[y]})),_:2},1032,["disabled","onClick"])):Object(r.createCommentVNode)("",!0),e.bySelf?Object(r.createCommentVNode)("",!0):(Object(r.openBlock)(),Object(r.createBlock)(L,{key:1,onClick:function(t){return I.addFriend(e)}},{default:Object(r.withCtx)((function(){return[w]})),_:2},1032,["onClick"]))]})),_:2},1024)]})),default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("span",x,[Object(r.createVNode)(D,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(G)]})),_:1})])]})),_:2},1024)])]),t%8==0?(Object(r.openBlock)(),Object(r.createElementBlock)("p",{key:0,class:"time",textContent:Object(r.toDisplayString)(e.time)},null,8,N)):Object(r.createCommentVNode)("",!0)],2)):(Object(r.openBlock)(),Object(r.createElementBlock)("div",V,"------"+Object(r.toDisplayString)(e.recallMsg)+"------",1))],64)})),128)),I.currentChat.targetId?Object(r.createCommentVNode)("",!0):(Object(r.openBlock)(),Object(r.createBlock)(q,{key:0,description:"选择联系人开始聊天","image-size":200,image:"/img/x-chat.png"}))],544),Object(r.createVNode)(K,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(J,{ref:"sendBox",onToBottom:I.scrollBottomSmooth},null,8,["onToBottom"])]})),_:1})]})),_:1})]})),_:1}),Object(r.createVNode)(X,{ref:"drawer"},null,512),Object(r.createVNode)(Y,{ref:"forbid"},null,512),Object(r.createVNode)(Z,{ref:"burn",onBurnMsg:I.handleBurn},null,8,["onBurnMsg"])],64)}],["__scopeId","data-v-edaee1fe"]]);t.default=M},"7c4f":function(e,t,n){},"801e":function(e,t,n){"use strict";n("7c4f")},"80d7":function(e,t,n){},c9cc:function(e,t,n){"use strict";n("d9be")},d9be:function(e,t,n){},fb44:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),c={class:"count-down"},o=Object(r.createTextVNode)(" 剩余时间: "),a={class:"count-down-num"},l=Object(r.createTextVNode)(" 秒 "),i={emits:["burn-msg"],setup:function(e,t){var n=t.expose,i=t.emit,s=Object(r.ref)(!1),u=Object(r.ref)(),b=Object(r.reactive)({msg:{},times:Object(r.computed)((function(){var e;return(null===(e=b.msg)||void 0===e?void 0:e.ext.fireTime)/1e3||0}))});return n({open:function(e){b.msg=e,s.value=!0},countDown:function(){var e=null;e=setInterval((function(){b.msg.ext.fireTime-=1e3,b.times<=0&&(clearInterval(e),b.msg.msg="消息已焚毁",i("burn-msg",b.msg),s.value=!1)}),1e3)}}),function(e,t){var n=Object(r.resolveComponent)("el-dialog");return Object(r.openBlock)(),Object(r.createBlock)(n,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.value=e}),title:"阅后即焚",width:"30%","destroy-on-close":"",ref:function(e,t){t.burnDialog=e,u.value=e},center:""},{default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("div",c,[o,Object(r.createElementVNode)("span",a,Object(r.toDisplayString)(Object(r.unref)(b).times),1),l]),Object(r.createElementVNode)("p",null,"消息内容: "+Object(r.toDisplayString)(Object(r.unref)(b).msg.msg),1)]})),_:1},8,["modelValue"])}}},s=(n("c9cc"),n("6b0d"));const u=n.n(s)()(i,[["__scopeId","data-v-8559be86"]]);t.default=u}}]);