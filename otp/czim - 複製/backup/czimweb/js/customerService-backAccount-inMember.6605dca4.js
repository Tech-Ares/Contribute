(window.webpackJsonp=window.webpackJsonp||[]).push([["customerService-backAccount-inMember"],{"0119":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),o=function(e){return Object(c.pushScopeId)("data-v-a1f8a880"),e=e(),Object(c.popScopeId)(),e},r={class:"left-panel"},a=Object(c.createTextVNode)("客服添加好友"),i={class:"kxTable-table"},l={key:0},s=Object(c.createTextVNode)("推广员"),d={key:1},u=Object(c.createTextVNode)("会员"),b={class:"kxTable-pagination-box"},h={class:"kxTable-do"},j=o((function(){return Object(c.createElementVNode)("div",{class:"left-panel"},[Object(c.createElementVNode)("span",null,[Object(c.createElementVNode)("a",null,"查询会员")])],-1)})),p={class:"right-panel"},f={class:"right-panel-search"},O={class:"join-table"},m=Object(c.createTextVNode)(" --- "),g={key:1},C={key:2},V={key:0},N=Object(c.createTextVNode)("推广员"),w={key:1},v=Object(c.createTextVNode)("会员"),x=Object(c.createTextVNode)("加入"),k={class:"joinTable-pagination-box"},z={class:"joinTable-do"},y=Object(c.createTextVNode)("取 消"),_=Object(c.createTextVNode)("保 存");var J=n("1da1"),E=(n("96cf"),{emits:["success","closed"],data:function(){return{visible:!1,isSaveing:!1,tableData:[],height:"100%",total:0,searchList:{chatRoomId:"",size:10,page:1},loading:!1,emptyText:"暂无数据",chatVisible:!1,joinloading:!1,tableJoin:[],joinheight:"100%",jointotal:0,searchJoin:{size:10,page:1,chatRoomId:"",nickName:""},joinText:"暂无数据",id:""}},mounted:function(){},methods:{findForm:function(){var e=this;return Object(J.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$API.customerService.getChat.post({userId:e.id,size:e.searchList.size,page:e.searchList.page});case 3:if(n=t.sent,console.log(n,"getfriend"),e.loading=!1,0===n.code){t.next=8;break}return t.abrupt("return",e.$message.error("获取数据失败"));case 8:e.tableData=n.data.rows,e.searchList.size=n.data.pageSize,e.total=n.data.total,e.searchList.page=n.data.page;case 12:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.searchList.page=e,this.findForm()},handleSizeChange:function(e){this.searchList.size=e,this.searchList.page=1,this.findForm()},refresh:function(){this.findForm()},add:function(){this.chatVisible=!0,this.findAbb()},findAbb:function(){var e=this;return Object(J.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.joinloading=!0,t.next=3,e.$API.appMember.findAddmember.post({size:e.searchJoin.size,page:e.searchJoin.page,customerId:e.id,nickName:e.searchJoin.nickName});case 3:if(n=t.sent,console.log(n,"可被客服添加的会员"),e.joinloading=!1,0===n.code){t.next=8;break}return t.abrupt("return",e.$message.error("获取数据失败"));case 8:e.tableJoin=n.data.rows,e.searchJoin.size=n.data.pageSize,e.jointotal=n.data.total,e.searchJoin.page=n.data.page;case 12:case"end":return t.stop()}}),t)})))()},joinChat:function(e){var t=this;return Object(J.a)(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$API.appMember.addService.post({userId:t.id,memberId:e});case 2:0==(c=n.sent).code?(t.$emit("success",t.findService),t.chatVisible=!1,t.findForm(),t.$message.success("操作成功")):t.$alert(c.message,"提示",{type:"error"}),t.findAbb();case 5:case"end":return n.stop()}}),n)})))()},JoinCurrentChange:function(e){this.searchJoin.page=e,this.findAbb()},JoinSizeChange:function(e){this.searchJoin.size=e,this.searchJoin.page=1,this.findAbb()},refreshJoin:function(){this.findAbb()},searchRole:function(){this.findAbb()},resetSearch:function(){for(var e in this.searchJoin)console.log(e),this.searchJoin[e]="size"==e?10:"page"==e?1:"";this.findAbb()},open:function(){return this.visible=!0,this},setData:function(e){this.id=e,console.log(this.id,"userId"),this.findForm()}}}),S=(n("23ad"),n("6b0d"));const T=n.n(S)()(E,[["render",function(e,t,n,o,J,E){var S=this,T=Object(c.resolveComponent)("el-button"),A=Object(c.resolveComponent)("el-header"),B=Object(c.resolveComponent)("el-table-column"),I=Object(c.resolveComponent)("el-avatar"),F=Object(c.resolveComponent)("el-tag"),L=Object(c.resolveComponent)("el-empty"),R=Object(c.resolveComponent)("el-table"),P=Object(c.resolveComponent)("el-pagination"),$=Object(c.resolveComponent)("el-main"),D=Object(c.resolveComponent)("el-container"),U=Object(c.resolveComponent)("el-drawer"),M=Object(c.resolveComponent)("el-input"),q=Object(c.resolveComponent)("el-icon-male"),G=Object(c.resolveComponent)("el-icon"),H=Object(c.resolveComponent)("el-link"),K=Object(c.resolveComponent)("el-popconfirm"),Q=Object(c.resolveComponent)("el-dialog"),W=Object(c.resolveDirective)("loading");return Object(c.openBlock)(),Object(c.createElementBlock)(c.Fragment,null,[Object(c.createVNode)(U,{title:"客服好友",modelValue:J.visible,"onUpdate:modelValue":t[2]||(t[2]=function(e){return J.visible=e}),size:"50%"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(D,null,{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(A,null,{default:Object(c.withCtx)((function(){return[Object(c.createElementVNode)("div",r,[Object(c.createVNode)(T,{type:"primary",icon:"el-icon-plus",onClick:t[0]||(t[0]=function(e){return E.add(S.id)})},{default:Object(c.withCtx)((function(){return[a]})),_:1})])]})),_:1}),Object(c.createVNode)($,{class:"nopadding"},{default:Object(c.withCtx)((function(){return[Object(c.withDirectives)(Object(c.createElementVNode)("div",i,[Object(c.createVNode)(R,{data:J.tableData,ref:"kxTable","row-key":"id",style:{width:"98%"},height:"auto"==J.height?null:"100%",stripe:""},{empty:Object(c.withCtx)((function(){return[Object(c.createVNode)(L,{description:J.emptyText,"image-size":100},null,8,["description"])]})),default:Object(c.withCtx)((function(){return[Object(c.createVNode)(B,{prop:"nickName",label:"昵称"}),Object(c.createVNode)(B,{prop:"avatar",label:"头像"},{default:Object(c.withCtx)((function(e){return[Object(c.createVNode)(I,{src:e.row.avatar,size:30},null,8,["src"])]})),_:1}),Object(c.createVNode)(B,{prop:"isAgent",label:"职位"},{default:Object(c.withCtx)((function(e){return[e.row.isAgent?(Object(c.openBlock)(),Object(c.createElementBlock)("span",l,[Object(c.createVNode)(F,{size:"small",type:"warning"},{default:Object(c.withCtx)((function(){return[s]})),_:1})])):Object(c.createCommentVNode)("",!0),e.row.isAgent?Object(c.createCommentVNode)("",!0):(Object(c.openBlock)(),Object(c.createElementBlock)("span",d,[Object(c.createVNode)(F,{size:"small"},{default:Object(c.withCtx)((function(){return[u]})),_:1})]))]})),_:1})]})),_:1},8,["data","height"])],512),[[W,J.loading]]),Object(c.createElementVNode)("div",b,[Object(c.createVNode)(P,{background:"",small:!0,layout:"total, sizes, prev, pager, next, jumper",total:J.total,"page-sizes":[10,20,50,100],currentPage:J.searchList.page,"onUpdate:currentPage":t[1]||(t[1]=function(e){return J.searchList.page=e}),onCurrentChange:E.handleCurrentChange,onSizeChange:E.handleSizeChange},null,8,["total","currentPage","onCurrentChange","onSizeChange"]),Object(c.createElementVNode)("div",h,[Object(c.createVNode)(T,{onClick:E.refresh,icon:"el-icon-refresh",circle:"",style:{"margin-left":"15px"}},null,8,["onClick"])])])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),Object(c.createVNode)(Q,{modelValue:J.chatVisible,"onUpdate:modelValue":t[7]||(t[7]=function(e){return J.chatVisible=e}),title:"客服添加好友"},{footer:Object(c.withCtx)((function(){return[Object(c.createVNode)(T,{onClick:t[5]||(t[5]=function(e){return J.chatVisible=!1})},{default:Object(c.withCtx)((function(){return[y]})),_:1}),Object(c.createVNode)(T,{type:"primary",loading:J.isSaveing,onClick:t[6]||(t[6]=function(e){return J.chatVisible=!1})},{default:Object(c.withCtx)((function(){return[_]})),_:1},8,["loading"])]})),default:Object(c.withCtx)((function(){return[Object(c.createVNode)(D,null,{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(A,null,{default:Object(c.withCtx)((function(){return[j,Object(c.createElementVNode)("div",p,[Object(c.createElementVNode)("div",f,[Object(c.createVNode)(M,{modelValue:J.searchJoin.nickName,"onUpdate:modelValue":t[3]||(t[3]=function(e){return J.searchJoin.nickName=e}),placeholder:"名称",clearable:""},null,8,["modelValue"]),Object(c.createVNode)(T,{type:"primary",icon:"el-icon-search",onClick:E.searchRole},null,8,["onClick"]),Object(c.createVNode)(T,{type:"info",plain:"",icon:"el-icon-refresh",onClick:E.resetSearch,disabled:J.searchJoin.nickName.length<1},null,8,["onClick","disabled"])])])]})),_:1}),Object(c.createVNode)($,{class:"nopadding"},{default:Object(c.withCtx)((function(){return[Object(c.withDirectives)(Object(c.createElementVNode)("div",O,[Object(c.createVNode)(R,{data:J.tableJoin,ref:"joinTable","row-key":"id",style:{width:"100%"},height:"auto"==J.joinheight?null:"100%",stripe:""},{empty:Object(c.withCtx)((function(){return[Object(c.createVNode)(L,{description:J.joinText,"image-size":100},null,8,["description"])]})),default:Object(c.withCtx)((function(){return[Object(c.createVNode)(B,{prop:"nickName",label:"昵称"}),Object(c.createVNode)(B,{prop:"gender",label:"性别"},{default:Object(c.withCtx)((function(e){return[0==e.row.gender?(Object(c.openBlock)(),Object(c.createElementBlock)(c.Fragment,{key:0},[m],64)):Object(c.createCommentVNode)("",!0),1==e.row.gender?(Object(c.openBlock)(),Object(c.createElementBlock)("span",g,[Object(c.createVNode)(G,{color:"#409EFF"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(q)]})),_:1})])):Object(c.createCommentVNode)("",!0),2==e.row.gender?(Object(c.openBlock)(),Object(c.createElementBlock)("span",C,[Object(c.createVNode)(G,{color:"#F56C6C"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(q)]})),_:1})])):Object(c.createCommentVNode)("",!0)]})),_:1}),Object(c.createVNode)(B,{prop:"isAgent",label:"职位"},{default:Object(c.withCtx)((function(e){return[e.row.isAgent?(Object(c.openBlock)(),Object(c.createElementBlock)("span",V,[Object(c.createVNode)(F,{size:"small",type:"warning"},{default:Object(c.withCtx)((function(){return[N]})),_:1})])):Object(c.createCommentVNode)("",!0),e.row.isAgent?Object(c.createCommentVNode)("",!0):(Object(c.openBlock)(),Object(c.createElementBlock)("span",w,[Object(c.createVNode)(F,{size:"small"},{default:Object(c.withCtx)((function(){return[v]})),_:1})]))]})),_:1}),Object(c.createVNode)(B,{prop:"introduce",label:"留言","show-overflow-tooltip":!0}),Object(c.createVNode)(B,{fixed:"right",label:"操作",width:"140"},{default:Object(c.withCtx)((function(e){return[Object(c.createVNode)(K,{title:"确定要添加为好友吗",onConfirm:function(t){return E.joinChat(e.row.id)}},{reference:Object(c.withCtx)((function(){return[Object(c.createVNode)(H,{type:"primary"},{default:Object(c.withCtx)((function(){return[x]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data","height"])],512),[[W,J.joinloading]]),Object(c.createElementVNode)("div",k,[Object(c.createVNode)(P,{background:"",small:!0,layout:"total, sizes, prev, pager, next, jumper",total:J.jointotal,"page-sizes":[10,20,50,100],currentPage:J.searchJoin.page,"onUpdate:currentPage":t[4]||(t[4]=function(e){return J.searchJoin.page=e}),onCurrentChange:E.JoinCurrentChange,onSizeChange:E.JoinSizeChange},null,8,["total","currentPage","onCurrentChange","onSizeChange"]),Object(c.createElementVNode)("div",z,[Object(c.createVNode)(T,{onClick:E.refreshJoin,icon:"el-icon-refresh",circle:"",style:{"margin-left":"15px"}},null,8,["onClick"])])])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])],64)}],["__scopeId","data-v-a1f8a880"]]);t.default=T},"23ad":function(e,t,n){"use strict";n("99e6")},"99e6":function(e,t,n){}}]);