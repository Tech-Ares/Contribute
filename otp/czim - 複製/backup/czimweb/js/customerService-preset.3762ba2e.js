(window.webpackJsonp=window.webpackJsonp||[]).push([["customerService-preset","customerService-preset-save"],{5192:function(e,t,n){"use strict";n("e36f")},a24e:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),c={class:"left-panel"},r={class:"right-panel"},a={class:"right-panel-search"},i={class:"kxTable-table"},l={key:0},s=Object(o.createTextVNode)("可用"),u={key:1},d=Object(o.createTextVNode)("冻结"),b=Object(o.createTextVNode)("启用话术"),f=Object(o.createTextVNode)("冻结话术"),m=Object(o.createTextVNode)("修改"),p={class:"kxTable-pagination-box"},h={class:"kxTable-do"};var j=n("1da1"),O=(n("96cf"),n("4de4"),n("d3b7"),{name:"presetList",components:{saveDialog:n("ab56").default},data:function(){return{dialog:{save:!1},member:{save:!1},selection:[],tableData:[],height:"100%",total:0,searchList:{nickName:"",size:10,page:1},loading:!1,emptyText:"暂无数据"}},watch:{groupFilterText:function(e){this.$refs.group.filter(e)}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return Object(j.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$API.preset.findList.post(e.searchList);case 3:if(n=t.sent,console.log(n,"预设消息列表"),e.loading=!1,0===n.code){t.next=8;break}return t.abrupt("return",e.$message.error("获取数据失败"));case 8:e.tableData=n.data.rows,e.searchList.size=n.data.pageSize,e.total=n.data.total,e.searchList.page=n.data.page,console.log(e.tableData);case 13:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.searchList.page=e,this.getData()},handleSizeChange:function(e){this.searchList.size=e,this.searchList.page=1,this.getData()},refresh:function(){this.$refs.kxTable.clearSelection(),this.getData()},add:function(){var e=this;this.dialog.save=!0,this.$nextTick((function(){e.$refs.saveDialog.open()}))},table_edit:function(e){var t=this;this.dialog.save=!0,this.$nextTick((function(){t.$refs.saveDialog.open("edit").setData(e)}))},table_del:function(e){var t=this;return Object(j.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,t.$API.preset.isActive.post({id:e.id,isActive:!e.isActive});case 3:o=n.sent,t.loading=!1,0==o.code?(t.getData(),t.$message.success("操作成功")):t.$alert(o.message,"提示",{type:"error"});case 6:case"end":return n.stop()}}),n)})))()},selectionChange:function(e){this.selection=e},searchRole:function(){this.getData()},resetSearch:function(){for(var e in this.searchList)console.log(e),this.searchList[e]="size"==e?10:"page"==e?1:"";this.getData()},handleSuccess:function(){this.refresh()}}}),g=(n("5192"),n("6b0d"));const v=n.n(g)()(O,[["render",function(e,t,n,j,O,g){var v=Object(o.resolveComponent)("el-button"),C=Object(o.resolveComponent)("el-input"),x=Object(o.resolveComponent)("el-header"),V=Object(o.resolveComponent)("el-table-column"),k=Object(o.resolveComponent)("el-tag"),w=Object(o.resolveComponent)("el-popconfirm"),N=Object(o.resolveComponent)("el-divider"),y=Object(o.resolveComponent)("el-empty"),_=Object(o.resolveComponent)("el-table"),S=Object(o.resolveComponent)("el-pagination"),D=Object(o.resolveComponent)("el-main"),B=Object(o.resolveComponent)("el-container"),$=Object(o.resolveComponent)("save-dialog"),z=Object(o.resolveComponent)("save-member"),T=Object(o.resolveDirective)("loading");return Object(o.openBlock)(),Object(o.createElementBlock)(o.Fragment,null,[Object(o.createVNode)(B,null,{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(x,null,{default:Object(o.withCtx)((function(){return[Object(o.createElementVNode)("div",c,[Object(o.createVNode)(v,{type:"primary",icon:"el-icon-plus",onClick:g.add},null,8,["onClick"])]),Object(o.createElementVNode)("div",r,[Object(o.createElementVNode)("div",a,[Object(o.createVNode)(C,{modelValue:O.searchList.nickName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return O.searchList.nickName=e}),placeholder:"名称",clearable:""},null,8,["modelValue"]),Object(o.createVNode)(v,{type:"primary",icon:"el-icon-search",onClick:g.searchRole},null,8,["onClick"]),Object(o.createVNode)(v,{type:"info",plain:"",icon:"el-icon-refresh",onClick:g.resetSearch,disabled:O.searchList.nickName.length<1},null,8,["onClick","disabled"])])])]})),_:1}),Object(o.createVNode)(D,{class:"nopadding"},{default:Object(o.withCtx)((function(){return[Object(o.withDirectives)(Object(o.createElementVNode)("div",i,[Object(o.createVNode)(_,{data:O.tableData,ref:"kxTable","row-key":"id",style:{width:"100%"},height:"auto"==O.height?null:"100%",stripe:"",onSelectionChange:g.selectionChange},{empty:Object(o.withCtx)((function(){return[Object(o.createVNode)(y,{description:O.emptyText,"image-size":100},null,8,["description"])]})),default:Object(o.withCtx)((function(){return[Object(o.createVNode)(V,{type:"selection",width:"50"}),Object(o.createVNode)(V,{type:"index",label:"#",width:"50"}),Object(o.createVNode)(V,{prop:"vague",label:"模糊查询",width:"100"}),Object(o.createVNode)(V,{prop:"abbre",label:"缩略",width:"100"}),Object(o.createVNode)(V,{prop:"context",label:"消息内容","show-overflow-tooltip":!0}),Object(o.createVNode)(V,{prop:"isActive",label:"状态",fixed:"right",width:"100"},{default:Object(o.withCtx)((function(e){return[e.row.isActive?(Object(o.openBlock)(),Object(o.createElementBlock)("span",l,[Object(o.createVNode)(k,{size:"small",type:"success"},{default:Object(o.withCtx)((function(){return[s]})),_:1})])):Object(o.createCommentVNode)("",!0),e.row.isActive?Object(o.createCommentVNode)("",!0):(Object(o.openBlock)(),Object(o.createElementBlock)("span",u,[Object(o.createVNode)(k,{size:"small",type:"danger"},{default:Object(o.withCtx)((function(){return[d]})),_:1})]))]})),_:1}),Object(o.createVNode)(V,{fixed:"right",label:"操作",width:"140"},{default:Object(o.withCtx)((function(e){return[e.row.isActive?Object(o.createCommentVNode)("",!0):(Object(o.openBlock)(),Object(o.createBlock)(w,{key:0,title:"确定启用话术吗？",onConfirm:function(t){return g.table_del(e.row,e.$index)}},{reference:Object(o.withCtx)((function(){return[Object(o.createVNode)(v,{type:"text",size:"small",style:{color:"blue"}},{default:Object(o.withCtx)((function(){return[b]})),_:1})]})),_:2},1032,["onConfirm"])),e.row.isActive?(Object(o.openBlock)(),Object(o.createBlock)(w,{key:1,title:"确定冻结话术吗？",onConfirm:function(t){return g.table_del(e.row,e.$index)}},{reference:Object(o.withCtx)((function(){return[Object(o.createVNode)(v,{type:"text",size:"small",style:{color:"#f56c6c"}},{default:Object(o.withCtx)((function(){return[f]})),_:1})]})),_:2},1032,["onConfirm"])):Object(o.createCommentVNode)("",!0),e.row.isActive?(Object(o.openBlock)(),Object(o.createElementBlock)(o.Fragment,{key:2},[Object(o.createVNode)(N,{direction:"vertical"}),Object(o.createVNode)(v,{type:"text",size:"small",onClick:function(t){return g.table_edit(e.row,e.$index)}},{default:Object(o.withCtx)((function(){return[m]})),_:2},1032,["onClick"])],64)):Object(o.createCommentVNode)("",!0)]})),_:1})]})),_:1},8,["data","height","onSelectionChange"])],512),[[T,O.loading]]),Object(o.createElementVNode)("div",p,[Object(o.createVNode)(S,{background:"",small:!0,layout:"total, sizes, prev, pager, next, jumper",total:O.total,"page-sizes":[10,20,50,100],currentPage:O.searchList.page,"onUpdate:currentPage":t[1]||(t[1]=function(e){return O.searchList.page=e}),onCurrentChange:g.handleCurrentChange,onSizeChange:g.handleSizeChange},null,8,["total","currentPage","onCurrentChange","onSizeChange"]),Object(o.createElementVNode)("div",h,[Object(o.createVNode)(v,{onClick:g.refresh,icon:"el-icon-refresh",circle:"",style:{"margin-left":"15px"}},null,8,["onClick"])])])]})),_:1})]})),_:1}),O.dialog.save?(Object(o.openBlock)(),Object(o.createBlock)($,{key:0,ref:"saveDialog",onSuccess:g.handleSuccess,onClosed:t[2]||(t[2]=function(e){return O.dialog.save=!1})},null,8,["onSuccess"])):Object(o.createCommentVNode)("",!0),O.member.save?(Object(o.openBlock)(),Object(o.createBlock)(z,{key:1,ref:"saveMember",onSuccess:g.handleSuccess,onClosed:t[3]||(t[3]=function(e){return O.member.save=!1})},null,8,["onSuccess"])):Object(o.createCommentVNode)("",!0)],64)}],["__scopeId","data-v-a53104d6"]]);t.default=v},ab56:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),c=Object(o.createTextVNode)("取 消"),r=Object(o.createTextVNode)("保 存");var a=n("1da1"),i=(n("96cf"),{emits:["success","closed"],data:function(){return{mode:"add",titleMap:{edit:"编辑预设消息",add:"新增预设消息"},visible:!1,isSaveing:!1,loading:!1,form:{id:"",vague:"",abbre:"",context:""},rules:{vague:[{required:!0,message:"请输入模糊查询"}],abbre:[{required:!0,message:"请输入缩略"}],context:[{required:!0,message:"请输入消息内容"}]}}},mounted:function(){},methods:{submit:function(){var e=this;this.$refs.dialogForm.validate(function(){var t=Object(a.a)(regeneratorRuntime.mark((function t(n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=7;break}return e.isSaveing=!0,t.next=4,e.$API.preset.saveForm.post(e.form);case 4:o=t.sent,e.isSaveing=!1,0==o.code?(e.$emit("success",e.form,e.mode),e.visible=!1,e.$message.success("操作成功")):e.$alert(o.message,"提示",{type:"error"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";return this.mode=e,this.visible=!0,this},setData:function(e){console.log(e,"row"),this.form.id=e.id,this.form.abbre=e.abbre,this.form.vague=e.vague,this.form.context=e.context}}}),l=(n("f5f7"),n("6b0d"));const s=n.n(l)()(i,[["render",function(e,t,n,a,i,l){var s=Object(o.resolveComponent)("el-input"),u=Object(o.resolveComponent)("el-form-item"),d=Object(o.resolveComponent)("el-form"),b=Object(o.resolveComponent)("el-button"),f=Object(o.resolveComponent)("el-dialog"),m=Object(o.resolveDirective)("loading");return Object(o.openBlock)(),Object(o.createBlock)(f,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.visible=e}),width:500,"destroy-on-close":"",onClosed:t[6]||(t[6]=function(t){return e.$emit("closed")})},{footer:Object(o.withCtx)((function(){return[Object(o.createVNode)(b,{onClick:t[3]||(t[3]=function(e){return i.visible=!1})},{default:Object(o.withCtx)((function(){return[c]})),_:1}),"show"!=i.mode?(Object(o.openBlock)(),Object(o.createBlock)(b,{key:0,type:"primary",loading:i.isSaveing,onClick:t[4]||(t[4]=function(e){return l.submit()})},{default:Object(o.withCtx)((function(){return[r]})),_:1},8,["loading"])):Object(o.createCommentVNode)("",!0)]})),default:Object(o.withCtx)((function(){return[Object(o.withDirectives)(Object(o.createVNode)(d,{model:i.form,ref:"dialogForm",rules:i.rules,"label-width":"100px","label-position":"left"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(u,{label:"模糊查询",prop:"vague"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(s,{modelValue:i.form.vague,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.form.vague=e}),placeholder:"请输入模糊查询",clearable:""},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(u,{label:"缩略",prop:"abbre"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(s,{modelValue:i.form.abbre,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.form.abbre=e}),placeholder:"请输入缩略",clearable:""},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(u,{label:"消息内容",prop:"context"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(s,{modelValue:i.form.context,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.form.context=e}),type:"textarea",placeholder:"请输入消息内容",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"]),[[m,i.loading]])]})),_:1},8,["title","modelValue"])}]]);t.default=s},ac7f3:function(e,t,n){},e36f:function(e,t,n){},f5f7:function(e,t,n){"use strict";n("ac7f3")}}]);