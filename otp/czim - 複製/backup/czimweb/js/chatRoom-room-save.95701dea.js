(window.webpackJsonp=window.webpackJsonp||[]).push([["chatRoom-room-save"],{"20d7":function(e,t,o){"use strict";o.r(t);var r=o("7a23"),n=["src"],a=Object(r.createTextVNode)("取 消"),c=Object(r.createTextVNode)("保 存");var l=o("1da1"),i=(o("d81d"),o("96cf"),{emits:["success","closed"],data:function(){return{mode:"add",titleMap:{edit:"编辑",add:"新增聊天室"},visible:!1,isSaveing:!1,loading:!1,form:{id:"",chatRoomName:"",chatRoomImg:"",chatRoomNotice:"",level:0,managerId:"",userNum:0},managerOptions:[],file:{},rules:{managerId:[{required:!0,message:"请选择管理员",trigger:"change"}],chatRoomName:[{required:!0,message:"请输入聊天室名称"}],chatRoomImg:[{required:!0,message:"请上传封面"}]}}},mounted:function(){},methods:{findForm:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log(e,"id"),t.loading=!0,o.next=4,t.$API.chatRoom.findForm.post(e);case 4:if(r=o.sent,console.log(r),t.loading=!1,0===r.code){o.next=9;break}return o.abrupt("return",t.$message.warning("获取数据失败"));case 9:t.form=r.data;case 10:case"end":return o.stop()}}),o)})))()},getmanager:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$API.chatRoom.getManager.get();case 2:if(o=t.sent,console.log(o,"getmanager"),e.loading=!1,0===o.code){t.next=7;break}return t.abrupt("return",e.$message.warning("获取数据失败"));case 7:r=o.data.map((function(e){return{value:e.managerName,label:e.managerId}})),console.log(r,"opts"),e.managerOptions=r,console.log(e.managerOptions);case 11:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;this.$refs.dialogForm.validate(function(){var t=Object(l.a)(regeneratorRuntime.mark((function t(o){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=7;break}return e.isSaveing=!0,t.next=4,e.$API.chatRoom.saveForm.post(e.form);case 4:r=t.sent,e.isSaveing=!1,0==r.code?(e.$emit("success",e.form,e.mode),e.visible=!1,e.$message.success("操作成功")):e.$alert(r.message,"提示",{type:"error"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},beforeAvatarUpload:function(e){this.file=e,console.log(e);var t=e.size/1024/1024<2;return t||this.$message.error("Avatar picture size can not exceed 2MB!"),t},handleUpload:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var o,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={headers:{"Content-Type":"multipart/form-data"}},(r=new FormData).append("file",e.file),t.next=5,e.$API.fileUpload.upload.post("",r,o);case 5:n=t.sent,e.form.chatRoomImg=n.data[0].imageUrl,console.log(n);case 8:case"end":return t.stop()}}),t)})))()},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";return this.mode=e,this.visible=!0,this.getmanager(),this},setData:function(e){this.findForm(e),this.getmanager()}}}),u=(o("7094"),o("6b0d"));const s=o.n(u)()(i,[["render",function(e,t,o,l,i,u){var s=Object(r.resolveComponent)("el-option"),m=Object(r.resolveComponent)("el-select"),d=Object(r.resolveComponent)("el-form-item"),f=Object(r.resolveComponent)("el-input"),p=Object(r.resolveComponent)("el-icon-plus"),b=Object(r.resolveComponent)("el-icon"),g=Object(r.resolveComponent)("el-upload"),h=Object(r.resolveComponent)("el-form"),O=Object(r.resolveComponent)("el-button"),j=Object(r.resolveComponent)("el-dialog"),v=Object(r.resolveDirective)("loading");return Object(r.openBlock)(),Object(r.createBlock)(j,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.visible=e}),width:500,"destroy-on-close":"",onClosed:t[6]||(t[6]=function(t){return e.$emit("closed")})},{footer:Object(r.withCtx)((function(){return[Object(r.createVNode)(O,{onClick:t[3]||(t[3]=function(e){return i.visible=!1})},{default:Object(r.withCtx)((function(){return[a]})),_:1}),"show"!=i.mode?(Object(r.openBlock)(),Object(r.createBlock)(O,{key:0,type:"primary",loading:i.isSaveing,onClick:t[4]||(t[4]=function(e){return u.submit()})},{default:Object(r.withCtx)((function(){return[c]})),_:1},8,["loading"])):Object(r.createCommentVNode)("",!0)]})),default:Object(r.withCtx)((function(){return[Object(r.withDirectives)(Object(r.createVNode)(h,{model:i.form,ref:"dialogForm",rules:i.rules,"label-width":"100px","label-position":"left"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(d,{label:"管理员",prop:"managerId"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(m,{modelValue:i.form.managerId,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.form.managerId=e}),placeholder:"选择管理员"},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(i.managerOptions,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(s,{key:e.value,value:e.label,label:e.value},{default:Object(r.withCtx)((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(e.value),1)]})),_:2},1032,["value","label"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(r.createVNode)(d,{label:"聊天室",prop:"chatRoomName"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(f,{modelValue:i.form.chatRoomName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.form.chatRoomName=e}),placeholder:"聊天室名称",clearable:""},null,8,["modelValue"])]})),_:1}),Object(r.createVNode)(d,{label:"聊天室公告",prop:"chatRoomNotice"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(f,{modelValue:i.form.chatRoomNotice,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.form.chatRoomNotice=e}),type:"textarea",placeholder:"聊天室公告",clearable:""},null,8,["modelValue"])]})),_:1}),Object(r.createVNode)(d,{label:"聊天室封面",prop:"chatRoomImg"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(g,{action:"#",class:"avatar-uploader","show-file-list":!1,"http-request":u.handleUpload,"before-upload":u.beforeAvatarUpload},{default:Object(r.withCtx)((function(){return[i.form.chatRoomImg?(Object(r.openBlock)(),Object(r.createElementBlock)("img",{key:0,class:"avatar",src:i.form.chatRoomImg},null,8,n)):(Object(r.openBlock)(),Object(r.createBlock)(b,{key:1,class:"avatar-uploader-icon"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(p)]})),_:1}))]})),_:1},8,["http-request","before-upload"])]})),_:1})]})),_:1},8,["model","rules"]),[[v,i.loading]])]})),_:1},8,["title","modelValue"])}]]);t.default=s},"48ac":function(e,t,o){},7094:function(e,t,o){"use strict";o("48ac")}}]);