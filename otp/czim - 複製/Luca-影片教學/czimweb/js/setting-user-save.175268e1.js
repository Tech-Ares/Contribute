(window.webpackJsonp=window.webpackJsonp||[]).push([["setting-user-save"],{"113d":function(e,t,r){"use strict";r.r(t);r("b0c0");var o=r("7a23"),n=Object(o.createTextVNode)("取 消"),l=Object(o.createTextVNode)("保 存");var a=r("1da1"),c=(r("96cf"),{emits:["success","closed"],data:function(){return{mode:"add",titleMap:{edit:"编辑",add:"新增"},visible:!1,isSaveing:!1,loading:!1,form:{name:"",loginName:"",password:"",phone:"",email:""},postList:[],roleList:[],currentRole:"",currentPost:"",rules:{loginName:[{required:!0,message:"请输入登录账号",trigger:"blur"}],name:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{pattern:/(?!(?:[^a-zA-Z]|\D|[a-zA-Z0-9])$).{6,}/,message:"密码格式错误",trigger:"blur"}]}}},mounted:function(){},methods:{getUserData:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,t.$API.sysUser.getUserById.get(e);case 3:if(o=r.sent,console.log(o),t.loading=!1,0===o.code){r.next=8;break}return r.abrupt("return",t.$message.warning("获取数据失败"));case 8:t.postList=o.data.allPostList,t.roleList=o.data.allRoleList,"edit"==t.mode&&(t.currentPost=o.data.postIds[0].postId,t.currentRole=o.data.roleIds[0].roleId),t.form=o.data.form;case 12:case"end":return r.stop()}}),r)})))()},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";return this.mode=e,this.visible=!0,this},submit:function(){var e=this;this.$refs.dialogForm.validate(function(){var t=Object(a.a)(regeneratorRuntime.mark((function t(r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.currentRole.length){t.next=3;break}return e.$message.warning("请选择所属角色"),t.abrupt("return",!1);case 3:if(e.currentPost.length){t.next=6;break}return e.$message.warning("请选择所在岗位"),t.abrupt("return",!1);case 6:if(!r){t.next=15;break}return e.isSaveing=!0,t.next=10,e.$API.sysUser.saveForm.post({form:e.form,roleIds:[e.currentRole],postIds:[e.currentPost]});case 10:o=t.sent,e.isSaveing=!1,0==o.code?(e.$emit("success"),e.visible=!1,e.$message.success("操作成功")):e.$alert(o.message,"提示",{type:"error"}),t.next=16;break;case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},setData:function(e){this.mode,this.getUserData(e)}}}),u=r("6b0d");const i=r.n(u)()(c,[["render",function(e,t,r,a,c,u){var i=Object(o.resolveComponent)("el-input"),s=Object(o.resolveComponent)("el-form-item"),d=Object(o.resolveComponent)("el-option"),b=Object(o.resolveComponent)("el-select"),m=Object(o.resolveComponent)("el-form"),f=Object(o.resolveComponent)("el-button"),p=Object(o.resolveComponent)("el-dialog"),j=Object(o.resolveDirective)("loading");return Object(o.openBlock)(),Object(o.createBlock)(p,{title:c.titleMap[c.mode],modelValue:c.visible,"onUpdate:modelValue":t[9]||(t[9]=function(e){return c.visible=e}),width:500,"destroy-on-close":"",onClosed:t[10]||(t[10]=function(t){return e.$emit("closed")})},{footer:Object(o.withCtx)((function(){return[Object(o.createVNode)(f,{onClick:t[7]||(t[7]=function(e){return c.visible=!1})},{default:Object(o.withCtx)((function(){return[n]})),_:1}),"show"!=c.mode?(Object(o.openBlock)(),Object(o.createBlock)(f,{key:0,type:"primary",loading:c.isSaveing,onClick:t[8]||(t[8]=function(e){return u.submit()})},{default:Object(o.withCtx)((function(){return[l]})),_:1},8,["loading"])):Object(o.createCommentVNode)("",!0)]})),default:Object(o.withCtx)((function(){return[Object(o.withDirectives)(Object(o.createVNode)(m,{model:c.form,rules:c.rules,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(s,{label:"用户名",prop:"name"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(i,{modelValue:c.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.form.name=e}),placeholder:"请输入完整的真实姓名",clearable:""},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(s,{label:"登录账号",prop:"loginName"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(i,{modelValue:c.form.loginName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.form.loginName=e}),placeholder:"用于登录系统",clearable:""},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(s,{label:"登录密码",prop:"password"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(i,{type:"password",modelValue:c.form.password,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.form.password=e}),clearable:"","show-password":""},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(s,{label:"所属角色"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(b,{modelValue:c.currentRole,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.currentRole=e}),placeholder:"请选择"},{default:Object(o.withCtx)((function(){return[(Object(o.openBlock)(!0),Object(o.createElementBlock)(o.Fragment,null,Object(o.renderList)(c.roleList,(function(e){return Object(o.openBlock)(),Object(o.createBlock)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(o.createVNode)(s,{label:"所在岗位"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(b,{modelValue:c.currentPost,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.currentPost=e}),placeholder:"请选择"},{default:Object(o.withCtx)((function(){return[(Object(o.openBlock)(!0),Object(o.createElementBlock)(o.Fragment,null,Object(o.renderList)(c.postList,(function(e){return Object(o.openBlock)(),Object(o.createBlock)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(o.createVNode)(s,{label:"手机号",prop:"phone"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(i,{modelValue:c.form.phone,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.form.phone=e}),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(s,{label:"邮箱",prop:"email"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(i,{modelValue:c.form.email,"onUpdate:modelValue":t[6]||(t[6]=function(e){return c.form.email=e}),placeholder:"请输入邮箱",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"]),[[j,c.loading]])]})),_:1},8,["title","modelValue"])}]]);t.default=i}}]);