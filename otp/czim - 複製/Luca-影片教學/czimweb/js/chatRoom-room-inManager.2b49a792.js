(window.webpackJsonp=window.webpackJsonp||[]).push([["chatRoom-room-inManager"],{"0fa8":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"kxTable-table"},o={key:0},c=Object(r.createTextVNode)("主管理员"),i={key:0},l=Object(r.createTextVNode)("已添加"),s={key:1},u=Object(r.createTextVNode)("未添加"),d=Object(r.createTextVNode)("加入"),b=Object(r.createTextVNode)("移除"),f=Object(r.createTextVNode)(" 主管理员不可移除 "),h={class:"kxTable-pagination-box"},j={class:"kxTable-do"},O=Object(r.createTextVNode)("取 消"),p=Object(r.createTextVNode)("保 存");var m=n("1da1"),g=(n("96cf"),{emits:["success","closed"],data:function(){return{visible:!1,isSaveing:!1,loading:!1,tableData:[],height:"100%",total:0,searchList:{chatRoomId:this.id,size:10,page:1},emptyText:"暂无数据"}},mounted:function(){},methods:{findForm:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$API.chatRoom.findManager.post(e.searchList);case 3:if(n=t.sent,console.log(n,"findManager"),e.loading=!1,0===n.code){t.next=8;break}return t.abrupt("return",e.$message.error("获取数据失败"));case 8:e.tableData=n.data.rows,e.searchList.size=n.data.pageSize,e.total=n.data.total,e.searchList.page=n.data.page;case 12:case"end":return t.stop()}}),t)})))()},addManager:function(e,t){var n=this;return Object(m.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,n.$API.chatRoom.addManager.post({chatRoomId:n.searchList.chatRoomId,userId:e,addOrDel:t});case 3:if(0===r.sent.code){r.next=6;break}return r.abrupt("return",n.$message.error("获取数据失败"));case 6:n.findForm();case 7:case"end":return r.stop()}}),r)})))()},handleCurrentChange:function(e){this.searchList.page=e,this.findForm()},handleSizeChange:function(e){this.searchList.size=e,this.searchList.page=1,this.findForm()},refresh:function(){this.$refs.kxTable.clearSelection(),this.findForm()},open:function(){return this.visible=!0,this},setData:function(e){this.searchList.chatRoomId=e,this.findForm()}}}),C=(n("bb90"),n("6b0d"));const w=n.n(C)()(g,[["render",function(e,t,n,m,g,C){var w=Object(r.resolveComponent)("el-table-column"),x=Object(r.resolveComponent)("el-avatar"),k=Object(r.resolveComponent)("el-tag"),v=Object(r.resolveComponent)("el-link"),V=Object(r.resolveComponent)("el-popconfirm"),N=Object(r.resolveComponent)("el-table"),y=Object(r.resolveComponent)("el-pagination"),_=Object(r.resolveComponent)("el-button"),z=Object(r.resolveComponent)("el-dialog"),B=Object(r.resolveDirective)("loading");return Object(r.openBlock)(),Object(r.createBlock)(z,{title:"添加管理员",modelValue:g.visible,"onUpdate:modelValue":t[3]||(t[3]=function(e){return g.visible=e}),onClosed:t[4]||(t[4]=function(t){return e.$emit("closed")})},{footer:Object(r.withCtx)((function(){return[Object(r.createVNode)(_,{onClick:t[1]||(t[1]=function(e){return g.visible=!1})},{default:Object(r.withCtx)((function(){return[O]})),_:1}),Object(r.createVNode)(_,{type:"primary",loading:g.isSaveing,onClick:t[2]||(t[2]=function(e){return g.visible=!1})},{default:Object(r.withCtx)((function(){return[p]})),_:1},8,["loading"])]})),default:Object(r.withCtx)((function(){return[Object(r.withDirectives)(Object(r.createElementVNode)("div",a,[Object(r.createVNode)(N,{data:g.tableData,ref:"kxTable","row-key":"id",style:{width:"100%"},height:"auto"==g.height?null:"100%",stripe:""},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(w,{prop:"nickName",label:"昵称"}),Object(r.createVNode)(w,{prop:"avatar",label:"头像"},{default:Object(r.withCtx)((function(e){return[Object(r.createVNode)(x,{src:e.row.avatar,size:30},null,8,["src"])]})),_:1}),Object(r.createVNode)(w,{prop:"isSuper",label:"权限"},{default:Object(r.withCtx)((function(e){return[e.row.isSuper?(Object(r.openBlock)(),Object(r.createElementBlock)("span",o,[Object(r.createVNode)(k,{size:"small"},{default:Object(r.withCtx)((function(){return[c]})),_:1})])):Object(r.createCommentVNode)("",!0)]})),_:1}),Object(r.createVNode)(w,{prop:"isManager",label:"管理员"},{default:Object(r.withCtx)((function(e){return[e.row.isManager?(Object(r.openBlock)(),Object(r.createElementBlock)("span",i,[Object(r.createVNode)(k,{size:"small",type:"success"},{default:Object(r.withCtx)((function(){return[l]})),_:1})])):Object(r.createCommentVNode)("",!0),e.row.isManager?Object(r.createCommentVNode)("",!0):(Object(r.openBlock)(),Object(r.createElementBlock)("span",s,[Object(r.createVNode)(k,{size:"small",type:"danger"},{default:Object(r.withCtx)((function(){return[u]})),_:1})]))]})),_:1}),Object(r.createVNode)(w,{fixed:"right",label:"操作",width:"140"},{default:Object(r.withCtx)((function(e){return[e.row.isManager?Object(r.createCommentVNode)("",!0):(Object(r.openBlock)(),Object(r.createBlock)(V,{key:0,title:"确定要添加管理员吗",onConfirm:function(t){return C.addManager(e.row.userId,1)}},{reference:Object(r.withCtx)((function(){return[Object(r.createVNode)(v,{type:"primary"},{default:Object(r.withCtx)((function(){return[d]})),_:1})]})),_:2},1032,["onConfirm"])),e.row.isManager&&!e.row.isSuper?(Object(r.openBlock)(),Object(r.createBlock)(V,{key:1,title:"确定要移除管理员吗",onConfirm:function(t){return C.addManager(e.row.userId,2)}},{reference:Object(r.withCtx)((function(){return[Object(r.createVNode)(v,{type:"danger"},{default:Object(r.withCtx)((function(){return[b]})),_:1})]})),_:2},1032,["onConfirm"])):Object(r.createCommentVNode)("",!0),e.row.isSuper?(Object(r.openBlock)(),Object(r.createElementBlock)(r.Fragment,{key:2},[f],64)):Object(r.createCommentVNode)("",!0)]})),_:1})]})),_:1},8,["data","height"])],512),[[B,g.loading]]),Object(r.createElementVNode)("div",h,[Object(r.createVNode)(y,{background:"",small:!0,layout:"total, sizes, prev, pager, next, jumper",total:g.total,"page-sizes":[10,20,50,100],currentPage:g.searchList.page,"onUpdate:currentPage":t[0]||(t[0]=function(e){return g.searchList.page=e}),onCurrentChange:C.handleCurrentChange,onSizeChange:C.handleSizeChange},null,8,["total","currentPage","onCurrentChange","onSizeChange"]),Object(r.createElementVNode)("div",j,[Object(r.createVNode)(_,{onClick:C.refresh,icon:"el-icon-refresh",circle:"",style:{"margin-left":"15px"}},null,8,["onClick"])])])]})),_:1},8,["modelValue"])}],["__scopeId","data-v-b53d5874"]]);t.default=w},"8de7":function(e,t,n){},bb90:function(e,t,n){"use strict";n("8de7")}}]);