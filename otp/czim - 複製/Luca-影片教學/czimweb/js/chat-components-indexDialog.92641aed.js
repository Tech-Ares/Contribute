(window.webpackJsonp=window.webpackJsonp||[]).push([["chat-components-indexDialog"],{"4d72":function(e,t,r){"use strict";r.r(t);var n=r("1da1"),c=(r("99af"),r("96cf"),r("7a23")),a=r("3ef4"),o=r("5502"),u=function(e){return Object(c.pushScopeId)("data-v-003b0cc0"),e=e(),Object(c.popScopeId)(),e}((function(){return Object(c.createElementVNode)("strong",null,"提示: 操作禁言后，该用户在一段时间内将无法在该群聊(聊天室)发言。禁言天数填0点击执行，将为用户解除禁言。",-1)})),l=Object(c.createTextVNode)("已禁言"),i=Object(c.createTextVNode)("正常"),b=Object(c.createTextVNode)("此用户已被移出群聊(聊天室)"),d=Object(c.createTextVNode)("当前"),s=Object(c.createTextVNode)("全局"),f=Object(c.createTextVNode)("当前"),p=Object(c.createTextVNode)("全局"),j={class:"dialog-footer"},m=Object(c.createTextVNode)("取消"),O=Object(c.createTextVNode)("执行"),g=Object(c.createTextVNode)("执行"),v={setup:function(e,t){var r=t.expose,v=Object(c.getCurrentInstance)().appContext,h=Object(o.c)(),x=Object(c.reactive)({day:[{required:!0,message:"请输入禁言时长",trigger:"blur"},{pattern:/(^0$)|(^[1-9]+[0-9]*$)/,message:"请输入大于0的整数",trigger:"blur"}],range:[{required:!0,message:"请选择",trigger:"blur"}]}),k=Object(c.ref)(!1),y=Object(c.ref)(""),V=Object(c.reactive)({loading:!1,handle:!1}),C=Object(c.ref)(),N=Object(c.reactive)({chatRoomId:Object(c.computed)((function(){return h.state.user.currentChat.chatRoomId||""})),memberId:"",day:0,range:"current"}),w=Object(c.reactive)({groupId:Object(c.computed)((function(){return h.state.user.currentChat.chatRoomId||h.state.user.currentChat.chatgroupId})),memberId:"",day:0,range:"current"}),I=Object(c.reactive)({info:{},nickName:""}),_=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V.loading=!0,e.next=3,v.config.globalProperties.$API.imApi.getForbidState.post({chatRoomId:N.chatRoomId,memberId:N.memberId});case 3:if(t=e.sent,V.loading=!1,0===t.code){e.next=7;break}return e.abrupt("return",a.a.error("获取用户状态失败"));case 7:console.log(t),I.info=t.data;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V.handle=!0,"current"!==w.range){e.next=21;break}return e.prev=2,e.next=5,C.value.validate();case 5:return e.next=7,v.config.globalProperties.$API.imApi.memberForbidden.post(N);case 7:t=e.sent,console.log(t),0==N.day?a.a.success("已为 用户：".concat(I.nickName," 解除禁言")):N.day>0&&a.a.success("禁言 用户：".concat(I.nickName," ").concat(N.day,"天")),T(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:return e.prev=16,V.handle=!1,e.finish(16);case 19:e.next=22;break;case 21:A();case 22:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V.loading=!0,e.next=3,v.config.globalProperties.$API.imApi.getForbidStateGroup.post({chatGroupId:w.groupId,memberId:w.memberId});case 3:if(t=e.sent,V.loading=!1,0===t.code){e.next=7;break}return e.abrupt("return",a.a.error("获取群聊用户状态失败"));case 7:console.log(t),I.info=t.data;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V.handle=!0,"current"!==w.range){e.next=21;break}return e.prev=2,e.next=5,C.value.validate();case 5:return e.next=7,v.config.globalProperties.$API.imApi.memberForbiddenGroup.post(w);case 7:t=e.sent,console.log(t),0==w.day?a.a.success("已为 用户：".concat(I.nickName," 解除禁言")):w.day>0&&a.a.success("禁言 用户：".concat(I.nickName," ").concat(w.day,"天")),T(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:return e.prev=16,V.handle=!1,e.finish(16);case 19:e.next=22;break;case 21:A();case 22:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("banGroup"!==y.value){e.next=20;break}return e.prev=1,e.next=4,C.value.validate();case 4:return e.next=6,v.config.globalProperties.$API.imApi.globalProhibit.post({memberId:w.memberId,day:w.day});case 6:t=e.sent,console.log(t),0==w.day?a.a.success("已为 用户：".concat(I.nickName," 解除全局禁言")):w.day>0&&a.a.success("全局禁言 用户：".concat(I.nickName," ").concat(w.day,"天")),T(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:return e.prev=15,V.handle=!1,e.finish(15);case 18:e.next=37;break;case 20:return e.prev=20,e.next=23,C.value.validate();case 23:return e.next=25,v.config.globalProperties.$API.imApi.globalProhibit.post({memberId:N.memberId,day:N.day});case 25:r=e.sent,console.log(r),0==N.day?a.a.success("已为 用户：".concat(I.nickName," 解除全局禁言")):N.day>0&&a.a.success("全局禁言 用户：".concat(I.nickName," ").concat(N.day,"天")),T(),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(20),console.log(e.t1);case 34:return e.prev=34,V.handle=!1,e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[1,12,15,18],[20,31,34,37]])})));return function(){return e.apply(this,arguments)}}(),T=function(){N.day=0,N.range="current",w.day=0,w.range="current",k.value=!1};return r({open:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"banRoom";y.value=t,I.nickName=e.ext.nickName,"banRoom"==t?N.memberId=e.from:w.memberId=e.from,k.value=!0},getUserStatus:_,getGroupUserStatus:B}),function(e,t){var r=Object(c.resolveComponent)("el-descriptions-item"),n=Object(c.resolveComponent)("el-tag"),a=Object(c.resolveComponent)("el-descriptions"),o=Object(c.resolveComponent)("el-radio-button"),v=Object(c.resolveComponent)("el-radio-group"),h=Object(c.resolveComponent)("el-form-item"),_=Object(c.resolveComponent)("el-input-number"),B=Object(c.resolveComponent)("el-form"),A=Object(c.resolveComponent)("el-button"),S=Object(c.resolveComponent)("el-dialog"),$=Object(c.resolveDirective)("loading");return Object(c.openBlock)(),Object(c.createBlock)(S,{modelValue:k.value,"onUpdate:modelValue":t[4]||(t[4]=function(e){return k.value=e}),title:"禁言用户",width:"35%","destroy-on-close":"",onClose:T},{footer:Object(c.withCtx)((function(){return[Object(c.createElementVNode)("span",j,[Object(c.createVNode)(A,{onClick:T},{default:Object(c.withCtx)((function(){return[m]})),_:1}),"banRoom"==y.value&&2!==Object(c.unref)(I).info.result?(Object(c.openBlock)(),Object(c.createBlock)(A,{key:0,type:"primary",onClick:R,loading:Object(c.unref)(V).handle},{default:Object(c.withCtx)((function(){return[O]})),_:1},8,["loading"])):Object(c.createCommentVNode)("",!0),"banGroup"==y.value&&2!==Object(c.unref)(I).info.result?(Object(c.openBlock)(),Object(c.createBlock)(A,{key:1,type:"primary",onClick:P},{default:Object(c.withCtx)((function(){return[g]})),_:1})):Object(c.createCommentVNode)("",!0)])]})),default:Object(c.withCtx)((function(){return[u,Object(c.withDirectives)(Object(c.createVNode)(a,null,{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(r,{label:"昵称:"},{default:Object(c.withCtx)((function(){return[Object(c.createTextVNode)(Object(c.toDisplayString)(Object(c.unref)(I).nickName),1)]})),_:1}),Object(c.createVNode)(r,{label:"状态:"},{default:Object(c.withCtx)((function(){return[1===Object(c.unref)(I).info.result?(Object(c.openBlock)(),Object(c.createBlock)(n,{key:0,type:"danger"},{default:Object(c.withCtx)((function(){return[l]})),_:1})):0===Object(c.unref)(I).info.result?(Object(c.openBlock)(),Object(c.createBlock)(n,{key:1,type:"success"},{default:Object(c.withCtx)((function(){return[i]})),_:1})):(Object(c.openBlock)(),Object(c.createBlock)(n,{key:2,type:"danger"},{default:Object(c.withCtx)((function(){return[b]})),_:1}))]})),_:1}),1===Object(c.unref)(I).info.result?(Object(c.openBlock)(),Object(c.createBlock)(r,{key:0,label:"剩余时间:"},{default:Object(c.withCtx)((function(){return[Object(c.createTextVNode)(Object(c.toDisplayString)(Object(c.unref)(I).info.time),1)]})),_:1})):Object(c.createCommentVNode)("",!0)]})),_:1},512),[[$,Object(c.unref)(V).loading]]),"banGroup"==y.value?(Object(c.openBlock)(),Object(c.createBlock)(B,{key:0,ref:function(e,t){t.forbidForm=e,C.value=e},model:Object(c.unref)(w),"label-position":"left",rules:Object(c.unref)(x)},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(h,{label:"禁言范围：",prop:"range"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(v,{modelValue:Object(c.unref)(w).range,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Object(c.unref)(w).range=e})},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(o,{label:"current"},{default:Object(c.withCtx)((function(){return[d]})),_:1}),Object(c.createVNode)(o,{label:"global"},{default:Object(c.withCtx)((function(){return[s]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(c.createVNode)(h,{label:"禁言天数：",prop:"day"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(_,{modelValue:Object(c.unref)(w).day,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(c.unref)(w).day=e}),step:1,min:0},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])):Object(c.createCommentVNode)("",!0),"banRoom"==y.value?(Object(c.openBlock)(),Object(c.createBlock)(B,{key:1,ref:function(e,t){t.forbidForm=e,C.value=e},model:Object(c.unref)(N),"label-position":"left",rules:Object(c.unref)(x)},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(h,{label:"禁言范围：",prop:"range"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(v,{modelValue:Object(c.unref)(N).range,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(c.unref)(N).range=e})},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(o,{label:"current"},{default:Object(c.withCtx)((function(){return[f]})),_:1}),Object(c.createVNode)(o,{label:"global"},{default:Object(c.withCtx)((function(){return[p]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(c.createVNode)(h,{label:"禁言天数：",prop:"day"},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(_,{modelValue:Object(c.unref)(N).day,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(c.unref)(N).day=e}),step:1,min:0},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])):Object(c.createCommentVNode)("",!0)]})),_:1},8,["modelValue"])}}},h=(r("801e"),r("6b0d"));const x=r.n(h)()(v,[["__scopeId","data-v-003b0cc0"]]);t.default=x},"7c4f":function(e,t,r){},"801e":function(e,t,r){"use strict";r("7c4f")}}]);