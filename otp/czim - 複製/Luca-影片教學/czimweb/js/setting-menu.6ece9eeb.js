(window.webpackJsonp=window.webpackJsonp||[]).push([["setting-menu"],{"19d2":function(e,t,n){"use strict";n("2ea6")},"2ea6":function(e,t,n){},c584:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"custom-tree-node el-tree-node__label"},a={class:"label"},c={key:0,class:"do"};var u=n("1da1"),i=(n("96cf"),n("4de4"),n("d3b7"),n("c975"),n("99af"),n("d81d"),n("0dc2")),s=1,l={name:"settingMenu",components:{save:i.default},data:function(){return{menuloading:!1,menuList:[],menuProps:{label:function(e){return e.meta.title}},menuFilterText:"",temporaryId:""}},watch:{menuFilterText:function(e){this.$refs.menu.filter(e)}},mounted:function(){this.getMenu()},methods:{getMenu:function(){var e=this;return Object(u.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.menuloading=!0,t.next=3,e.$API.sysMenu.menuList.get();case 3:n=t.sent,e.menuloading=!1,e.menuList=n.data,console.log(n.data);case 7:case"end":return t.stop()}}),t)})))()},menuClick:function(e){this.$refs.save.setData(e),this.$refs.main.$el.scrollTop=0},menuFilterNode:function(e,t){return!e||-1!==t.meta.title.indexOf(e)},nodeDrop:function(e,t,n){this.$refs.save.setData({}),this.$message("拖拽对象：".concat(e.data.meta.title,", 释放对象：").concat(t.data.meta.title,", 释放对象的位置：").concat(n))},randomString:function(e){e=e||10;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=t.length,r="linshi-",o=0;o<e;o++)r+=t.charAt(Math.floor(Math.random()*n));return r},add:function(e,t){var n=this;return Object(u.a)(regeneratorRuntime.mark((function r(){var o,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:console.log("node",e),console.log("data",t),n.temporaryId=n.randomString(),o="未命名"+s++,a={parentId:t?t.id:"",name:o,number:0,path:"",component:"",meta:{title:o,type:"menu"},id:n.temporaryId},n.menuloading=!0,n.menuloading=!1,n.$refs.menu.append(a,e),n.$refs.menu.setCurrentKey(a.id),n.$refs.save.setData(a);case 10:case"end":return r.stop()}}),r)})))()},delMenu:function(){var e=this;return Object(u.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.$refs.menu.getCheckedNodes(),console.log("选中的nodes:",n),0!=n.length){t.next=5;break}return e.$message.warning("请选择需要删除的项"),t.abrupt("return",!1);case 5:return t.next=7,e.$confirm("确认删除已选择的菜单吗？","提示",{type:"warning",confirmButtonText:"删除",confirmButtonClass:"el-button--danger"}).catch((function(){}));case 7:if("confirm"==t.sent){t.next=10;break}return t.abrupt("return",!1);case 10:return e.menuloading=!0,r=n.map((function(e){return e.id})),t.next=14,e.$API.sysMenu.menuDelete.post(r);case 14:if(o=t.sent,e.menuloading=!1,console.log(o),0===o.code){t.next=19;break}return t.abrupt("return",e.$message.warning("删除失败"));case 19:return e.getMenu(),e.$refs.save.setData({}),t.abrupt("return",e.$message.success("删除菜单成功"));case 22:case"end":return t.stop()}}),t)})))()},updateMenu:function(e){var t=this;return Object(u.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getMenu();case 2:console.log(e),t.$refs.menu.setCurrentKey(e),r=t.$refs.menu.getCurrentNode(),t.$refs.save.setData(r);case 6:case"end":return n.stop()}}),n)})))()}}},d=(n("19d2"),n("6b0d"));const m=n.n(d)()(l,[["render",function(e,t,n,u,i,s){var l=Object(r.resolveComponent)("el-input"),d=Object(r.resolveComponent)("el-header"),m=Object(r.resolveComponent)("el-icon-plus"),f=Object(r.resolveComponent)("el-icon"),p=Object(r.resolveComponent)("el-tree"),b=Object(r.resolveComponent)("el-main"),g=Object(r.resolveComponent)("el-button"),O=Object(r.resolveComponent)("el-footer"),h=Object(r.resolveComponent)("el-container"),j=Object(r.resolveComponent)("el-aside"),v=Object(r.resolveComponent)("save"),C=Object(r.resolveDirective)("loading");return Object(r.openBlock)(),Object(r.createBlock)(h,null,{default:Object(r.withCtx)((function(){return[Object(r.withDirectives)(Object(r.createVNode)(j,{width:"300px"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(h,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(d,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(l,{placeholder:"输入关键字进行过滤",modelValue:i.menuFilterText,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.menuFilterText=e}),clearable:""},null,8,["modelValue"])]})),_:1}),Object(r.createVNode)(b,{class:"nopadding"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(p,{ref:"menu",class:"menu","node-key":"id",data:i.menuList,props:i.menuProps,draggable:"","highlight-current":"","expand-on-click-node":!1,"check-strictly":"","show-checkbox":"","filter-node-method":s.menuFilterNode,onNodeClick:s.menuClick,onNodeDrop:s.nodeDrop},{default:Object(r.withCtx)((function(e){var t=e.node,n=e.data;return[Object(r.createElementVNode)("span",o,[Object(r.createElementVNode)("span",a,Object(r.toDisplayString)(t.label),1),t.level<2?(Object(r.openBlock)(),Object(r.createElementBlock)("span",c,[Object(r.createVNode)(f,{onClick:Object(r.withModifiers)((function(e){return s.add(t,n)}),["stop"])},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(m)]})),_:2},1032,["onClick"])])):Object(r.createCommentVNode)("",!0)])]})),_:1},8,["data","props","filter-node-method","onNodeClick","onNodeDrop"])]})),_:1}),Object(r.createVNode)(O,{style:{height:"51px"}},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(g,{type:"primary",size:"mini",icon:"el-icon-plus",onClick:t[1]||(t[1]=function(e){return s.add()})}),Object(r.createVNode)(g,{type:"danger",size:"mini",plain:"",icon:"el-icon-delete",onClick:s.delMenu},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},512),[[C,i.menuloading]]),Object(r.createVNode)(h,null,{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(b,{class:"nopadding",style:{padding:"20px"},ref:"main"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(v,{ref:"save",menu:i.menuList,onOnSave:s.updateMenu},null,8,["menu","onOnSave"])]})),_:1},512)]})),_:1})]})),_:1})}],["__scopeId","data-v-0b786c02"]]);t.default=m}}]);